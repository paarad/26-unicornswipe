# ü¶Ñ UnicornSwipe Setup Guide

Complete guide to set up Supabase database and OpenAI integration for UnicornSwipe.

## üìã Prerequisites

- Supabase account: [supabase.com](https://supabase.com)
- OpenAI account: [platform.openai.com](https://platform.openai.com)
- Node.js 18+ installed

## üóÑÔ∏è Step 1: Database Setup

### 1.1 Connect to your Supabase project

1. Go to your Supabase dashboard
2. Select your existing project or create a new one
3. Navigate to **SQL Editor**

### 1.2 Run the database schema

Copy and paste the contents of `database-schema.sql` into the SQL editor and run it. This will create:

- ‚úÖ **6 main tables** with unique `unicornswipe_` prefix
- ‚úÖ **Performance indexes** for fast queries
- ‚úÖ **Triggers** for auto-updating analytics
- ‚úÖ **Row Level Security** for data privacy
- ‚úÖ **5 predefined founder archetypes**
- ‚úÖ **Useful views** for analytics
- ‚úÖ **Helper functions** for common operations

### 1.3 Import startup pitches data

After the schema is created, run `import-csv-data.sql` to import all 120 startup pitches from your CSV file.

**Verification**: You should see:
```sql
SELECT COUNT(*) FROM unicornswipe_startup_pitches; -- Should return 120
SELECT COUNT(*) FROM unicornswipe_founder_archetypes; -- Should return 5
```

## üîë Step 2: Environment Configuration

### 2.1 Create your `.env.local` file

```bash
cp env.example .env.local
```

### 2.2 Fill in your API credentials

```env
# OpenAI Configuration
OPENAI_API_KEY=sk-your_actual_openai_api_key_here

# Supabase Configuration  
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_actual_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_actual_service_role_key_here

# App Configuration
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_APP_NAME=UnicornSwipe

# Environment
NODE_ENV=development
```

### 2.3 Where to find your Supabase keys

1. Go to **Settings** ‚Üí **API** in your Supabase dashboard
2. Copy:
   - **Project URL** ‚Üí `NEXT_PUBLIC_SUPABASE_URL`
   - **anon/public key** ‚Üí `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - **service_role key** ‚Üí `SUPABASE_SERVICE_ROLE_KEY` (keep secret!)

### 2.4 Where to find your OpenAI key

1. Go to [platform.openai.com/api-keys](https://platform.openai.com/api-keys)
2. Create a new secret key
3. Copy the key ‚Üí `OPENAI_API_KEY`

## üöÄ Step 3: Test the Integration

### 3.1 Start the development server

```bash
npm run dev
```

### 3.2 Test database connectivity

Open the browser console and check for any errors. The app should now:

- ‚úÖ Fetch real pitches from Supabase
- ‚úÖ Record swipe decisions in the database
- ‚úÖ Track analytics events
- ‚úÖ Generate founder archetypes (will use demo mode without OpenAI)

### 3.3 Enable OpenAI integration

The app will automatically use OpenAI if the API key is configured. You can test this by:

1. Complete a swipe session (10 swipes)
2. Check if the founder archetype is generated by AI
3. Look for more dynamic and personalized results

## üìä Step 4: Database Tables Overview

Here's what each table does:

### Core Tables
- **`unicornswipe_startup_pitches`** - All startup pitch data
- **`unicornswipe_swipe_sessions`** - User swipe sessions
- **`unicornswipe_swipe_decisions`** - Individual swipe choices
- **`unicornswipe_founder_archetypes`** - Predefined personality types

### Generated Content
- **`unicornswipe_startup_packs`** - AI-generated startup ideas
- **`unicornswipe_analytics`** - Event tracking and insights

### Analytics Views
- **`unicornswipe_popular_pitches`** - Most liked startup ideas
- **`unicornswipe_session_stats`** - Session summaries
- **`unicornswipe_daily_stats`** - Daily usage analytics

## üîç Step 5: Useful SQL Queries

### Check popular pitches
```sql
SELECT * FROM unicornswipe_popular_pitches LIMIT 10;
```

### View recent sessions
```sql
SELECT * FROM unicornswipe_session_stats 
WHERE started_at > NOW() - INTERVAL '24 hours'
ORDER BY started_at DESC;
```

### Analytics overview
```sql
SELECT 
    COUNT(*) as total_sessions,
    AVG(total_swipes) as avg_swipes,
    AVG(investment_rate) as avg_investment_rate
FROM unicornswipe_session_stats 
WHERE started_at > NOW() - INTERVAL '7 days';
```

### Most rejected pitches
```sql
SELECT pitch, total_rejects, like_rate 
FROM unicornswipe_startup_pitches 
WHERE total_rejects > 0
ORDER BY total_rejects DESC 
LIMIT 10;
```

## üîß Step 6: Advanced Configuration

### 6.1 Row Level Security (RLS)

The database includes RLS policies that:
- Allow public read access to pitches and archetypes
- Restrict session access to session owners only
- Protect user data and analytics

### 6.2 Automatic Analytics

Every swipe automatically:
- Updates pitch like/reject counters
- Calculates like rates
- Records timing data
- Tracks user behavior

### 6.3 Session Management

Sessions are tracked by:
- UUID for logged-in users
- Session tokens for anonymous users
- Device and browser detection
- Geographic data (if available)

## üêõ Troubleshooting

### Database Connection Issues
1. Check your Supabase project is active
2. Verify API keys are correct
3. Ensure RLS policies allow your queries

### OpenAI Integration Issues
1. Verify API key is valid and has credits
2. Check OpenAI usage limits
3. Monitor console for API errors

### Data Not Saving
1. Check browser console for errors
2. Verify table names match exactly
3. Test with Supabase dashboard SQL editor

## üìà Next Steps

Once everything is working:

1. **Deploy to production** (Vercel recommended)
2. **Set up monitoring** with Supabase analytics
3. **Configure alerts** for high usage
4. **Implement caching** for better performance
5. **Add more pitch categories** for filtering
6. **Create admin dashboard** for insights

## üéØ Production Checklist

- [ ] Database schema deployed
- [ ] All environment variables configured
- [ ] OpenAI API key working
- [ ] Supabase connection tested
- [ ] Analytics tracking verified
- [ ] Error handling implemented
- [ ] Performance optimized
- [ ] Security policies tested

---

ü¶Ñ **Ready to go viral on tech Twitter!** Your UnicornSwipe app now has a robust backend that can scale to thousands of users while providing valuable insights into startup preferences and founder personalities. 